<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>vikutils: viking Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="viking Reference Manual">
<link rel="up" href="ch01.html" title="[Insert title here]">
<link rel="prev" href="viking-viktrwlayer-wpwin.html" title="viktrwlayer_wpwin">
<link rel="next" href="VikViewport.html" title="VikViewport">
<meta name="generator" content="GTK-Doc V1.24 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#viking-vikutils.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="viking-viktrwlayer-wpwin.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="VikViewport.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="viking-vikutils"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="viking-vikutils.top_of_page"></a>vikutils</span></h2>
<p>vikutils</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="viking-vikutils.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-trackpoint-formatted-message" title="vu_trackpoint_formatted_message ()">vu_trackpoint_formatted_message</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-check-latest-version" title="vu_check_latest_version ()">vu_check_latest_version</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-set-auto-features-on-first-run" title="vu_set_auto_features_on_first_run ()">vu_set_auto_features_on_first_run</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-get-canonical-filename" title="vu_get_canonical_filename ()">vu_get_canonical_filename</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-get-time-string" title="vu_get_time_string ()">vu_get_time_string</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-get-tz-at-location" title="vu_get_tz_at_location ()">vu_get_tz_at_location</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-setup-lat-lon-tz-lookup" title="vu_setup_lat_lon_tz_lookup ()">vu_setup_lat_lon_tz_lookup</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-finalize-lat-lon-tz-lookup" title="vu_finalize_lat_lon_tz_lookup ()">vu_finalize_lat_lon_tz_lookup</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-command-line" title="vu_command_line ()">vu_command_line</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="viking-vikutils.html#vu-copy-label-menu" title="vu_copy_label_menu ()">vu_copy_label_menu</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="viking-vikutils.description"></a><h2>Description</h2>
</div>
<div class="refsect1">
<a name="viking-vikutils.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="vu-trackpoint-formatted-message"></a><h3>vu_trackpoint_formatted_message ()</h3>
<pre class="programlisting"><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
vu_trackpoint_formatted_message (<em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *format_code</code></em>,
                                 <em class="parameter"><code><a class="link" href="viking-viktrack.html#VikTrackpoint" title="struct VikTrackpoint"><span class="type">VikTrackpoint</span></a> *trkpt</code></em>,
                                 <em class="parameter"><code><a class="link" href="viking-viktrack.html#VikTrackpoint" title="struct VikTrackpoint"><span class="type">VikTrackpoint</span></a> *trkpt_prev</code></em>,
                                 <em class="parameter"><code><a class="link" href="viking-viktrack.html#VikTrack" title="struct VikTrack"><span class="type">VikTrack</span></a> *trk</code></em>,
                                 <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gdouble"><span class="type">gdouble</span></a> climb</code></em>);</pre>
<p>TODO: One day replace this cryptic format code with some kind of tokenizer parsing
   thus would make it more user friendly and maybe even GUI controlable.
However for now at least there is some semblance of user control</p>
<div class="refsect3">
<a name="id-1.2.150.5.2.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>format_code</p></td>
<td class="parameter_description"><p>String describing the message to generate</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trkpt</p></td>
<td class="parameter_description"><p>The trackpoint for which the message is generated about</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trkpt_prev</p></td>
<td class="parameter_description"><p>A trackpoint (presumed previous) for interpolating values with the other trackpoint (such as speed)</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trk</p></td>
<td class="parameter_description"><p>The track in which the trackpoints reside</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>climb</p></td>
<td class="parameter_description"><p>Vertical speed (Out of band (i.e. not in a trackpoint) value for display currently only for GPSD usage)</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="vu-check-latest-version"></a><h3>vu_check_latest_version ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_check_latest_version (<em class="parameter"><code><a href="http://developer.gnome.org/gtk2/GtkWindow.html"><span class="type">GtkWindow</span></a> *window</code></em>);</pre>
<p>Periodically checks the released latest VERSION file on the website to compare with the running version</p>
<div class="refsect3">
<a name="id-1.2.150.5.3.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>window</p></td>
<td class="parameter_description"><p>Somewhere where we may need use the display to inform the user about the version status</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="vu-set-auto-features-on-first-run"></a><h3>vu_set_auto_features_on_first_run ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_set_auto_features_on_first_run (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Ask the user's opinion to set some of Viking's default behaviour</p>
</div>
<hr>
<div class="refsect2">
<a name="vu-get-canonical-filename"></a><h3>vu_get_canonical_filename ()</h3>
<pre class="programlisting"><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
vu_get_canonical_filename (<em class="parameter"><code><a class="link" href="VikLayer.html" title="VikLayer"><span class="type">VikLayer</span></a> *vl</code></em>,
                           <em class="parameter"><code>const <a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *filename</code></em>);</pre>
<div class="refsect3">
<a name="id-1.2.150.5.5.4"></a><h4>Returns</h4>
<p> Canonical absolute filename</p>
<p>Any time a path may contain a relative component, so need to prepend that directory it is relative to
Then resolve the full path to get the normal canonical filename</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="vu-get-time-string"></a><h3>vu_get_time_string ()</h3>
<pre class="programlisting"><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
vu_get_time_string (<em class="parameter"><code><span class="type">time_t</span> *time</code></em>,
                    <em class="parameter"><code>const <a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *format</code></em>,
                    <em class="parameter"><code>const <a class="link" href="viking-vikcoord.html#VikCoord" title="VikCoord"><span class="type">VikCoord</span></a> *vc</code></em>,
                    <em class="parameter"><code>const <a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *gtz</code></em>);</pre>
<p><em class="parameter"><code>time_t</code></em>
: The time of which the string is wanted
<em class="parameter"><code>format</code></em>
  The format of the time string - such as "<code class="literal">c</code>"
<em class="parameter"><code>vc</code></em>
:     Position of object for the time output - maybe NULL
         (only applicable for VIK_TIME_REF_WORLD)
<em class="parameter"><code>tz</code></em>
:     TimeZone string - maybe NULL.
         (only applicable for VIK_TIME_REF_WORLD)
         Useful to pass in the cached value from <a class="link" href="viking-vikutils.html#vu-get-tz-at-location" title="vu_get_tz_at_location ()"><code class="function">vu_get_tz_at_location()</code></a> to save looking it up again for the same position</p>
<div class="refsect3">
<a name="id-1.2.150.5.6.5"></a><h4>Returns</h4>
<p> A string of the time according to the time display property</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="vu-get-tz-at-location"></a><h3>vu_get_tz_at_location ()</h3>
<pre class="programlisting"><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
vu_get_tz_at_location (<em class="parameter"><code>const <a class="link" href="viking-vikcoord.html#VikCoord" title="VikCoord"><span class="type">VikCoord</span></a> *vc</code></em>);</pre>
<p><em class="parameter"><code>vc</code></em>
:     Position for which the time zone is desired</p>
<div class="refsect3">
<a name="id-1.2.150.5.7.5"></a><h4>Returns</h4>
<p> TimeZone string of the nearest known location. String may be NULL.</p>
<p>Use the k-d tree method (http://en.wikipedia.org/wiki/Kd-tree) to quickly retreive
the nearest location to the given position.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="vu-setup-lat-lon-tz-lookup"></a><h3>vu_setup_lat_lon_tz_lookup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_setup_lat_lon_tz_lookup ();</pre>
<p>Can be called multiple times but only initializes the lookup once</p>
</div>
<hr>
<div class="refsect2">
<a name="vu-finalize-lat-lon-tz-lookup"></a><h3>vu_finalize_lat_lon_tz_lookup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_finalize_lat_lon_tz_lookup ();</pre>
<p>Clear memory used by the lookup.
 only call on program exit</p>
</div>
<hr>
<div class="refsect2">
<a name="vu-command-line"></a><h3>vu_command_line ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_command_line (<em class="parameter"><code><a class="link" href="VikWindow.html" title="VikWindow"><span class="type">VikWindow</span></a> *vw</code></em>,
                 <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gdouble"><span class="type">gdouble</span></a> latitude</code></em>,
                 <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gdouble"><span class="type">gdouble</span></a> longitude</code></em>,
                 <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> zoom_osm_level</code></em>,
                 <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> map_id</code></em>);</pre>
<p>Apply any startup values that have been specified from the command line
Values are defaulted in such a manner not to be applied when they haven't been specified</p>
</div>
<hr>
<div class="refsect2">
<a name="vu-copy-label-menu"></a><h3>vu_copy_label_menu ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
vu_copy_label_menu (<em class="parameter"><code><a href="http://developer.gnome.org/gtk2/GtkWidget.html"><span class="type">GtkWidget</span></a> *widget</code></em>,
                    <em class="parameter"><code><a href="https://developer.gnome.org/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> button</code></em>);</pre>
</div>
</div>
<div class="refsect1">
<a name="viking-vikutils.other_details"></a><h2>Types and Values</h2>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.24</div>
</body>
</html>